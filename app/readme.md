# 优化方案

## 前提：
 1.各种设备得mqtt主题路径格式需要统一规划

 2.各种设备需要统一注册消息相应地址等

## 操作流程
用户触发操作（http） -> server -> push对应消息到消息队列A

订阅消息队列A(负载均衡可多个订阅) -> 执行push消息到mqtt M1

订阅mqtt M1 -> 收到客户端推送消息，处理成统一消息格式，再推送到消息队列B

订阅消息队列B(负载均衡可多个订阅) -> 解析消息并rpc到对应得设备类型


## 第一步
目前先跳过消息队列转发， 直接投递消息到mqtt